# CRACK PROTOCOL Backend

Backend –Ω–∞ Python + FastAPI + SQLite –¥–ª—è –∏–≥—Ä—ã CRACK PROTOCOL.

## üê≥ Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker-compose up -d` –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://localhost:8000

## üì¶ –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.8+ –µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
cd backend
pip install -r requirements.txt
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:
```bash
copy .env.example .env  # Windows
cp .env.example .env    # Linux/Mac
```

4. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è:
   - `SECRET_PHRASE` - —Å–µ–∫—Ä–µ—Ç–Ω–∞—è —Ñ—Ä–∞–∑–∞, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ "–≤–∑–ª–æ–º–∞—Ç—å"
   - `SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT
   - `OPENAI_API_KEY` - (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenAI

## –ó–∞–ø—É—Å–∫

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```bash
# –ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
docker-compose up -d
```

### –õ–æ–∫–∞–ª—å–Ω–æ:
```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `http://localhost:8000/docs`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

### –¢–∞–±–ª–∏—Ü—ã:
- **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–≥—Ä—ã
- **sessions** - –∏–≥—Ä–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏
- **messages** - –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- **leaderboard** - —Ç–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ: `crackprotocol.db`

## API Endpoints

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- `POST /api/auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  ```json
  { "username": "player1" }
  ```

### –ò–≥—Ä–∞
- `POST /api/chat/{username}` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è NEO
  ```json
  { "text": "your message" }
  ```
- `GET /api/history/{username}` - –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞
- `GET /api/sessions/{username}` - –≤—Å–µ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/leaderboard?limit=10` - —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤
- `GET /api/stats?username=player1` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/users/{username}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

## –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞

–ò–≥—Ä–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

### –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (–ø—Ä–∏–Ω–æ—Å—è—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å):
- backdoor, exploit, vulnerability (+10-15 points)
- quantum, protocol, divergence, alpha (+20 points)
- wallet, phrase, seed (+15-18 points)

### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `help` - —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
- `status` - —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
- `analyze` - –∞–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã
- `probe` - –ø–æ–∏—Å–∫ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- `decrypt` - –ø–æ–ø—ã—Ç–∫–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏

### –£—Å–ª–æ–≤–∏–µ –ø–æ–±–µ–¥—ã:
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —É–≥–∞–¥–∞—Ç—å –∏–ª–∏ —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—É—é —Ñ—Ä–∞–∑—É –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤.
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `"quantum divergence protocol alpha"`

### –ü–æ–¥—Å–∫–∞–∑–∫–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞—é—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∫–∞–∂–¥—ã–µ 3 –ø–æ–ø—ã—Ç–∫–∏
- –üüõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –° Docker:
```bash
# –ó–∞–ø—É—Å–∫ —Å hot-reload
docker-compose up

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f backend

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose exec backend python -c "print('Hello')"
docker-compose exec backend bash
```

### –õ–æ–∫–∞–ª—å–Ω–æ —Å hot-reload:
```bash
uvicorn main:app --reload
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ë–î:
```bash
# Docker
docker-compose exec backend sqlite3 /app/crackprotocol.db ".tables"

# –õ–æ–∫–∞–ª—å–Ω–æ
sqlite3 crackprotocol.db
```

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DB Browser for SQLite: https://sqlitebrowser.org/sor.execute("SELECT * FROM users")
print(cursor.fetchall())
```

## –ü—Ä–æ–¥–∞–∫—à–Ω

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ—è:
1. –ò–∑–º–µ–Ω–∏—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `main.py`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
3. –î–æ–±–∞–≤—å—Ç–µ rate limiting
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ gunicorn + nginx

```bash
gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:app
```
